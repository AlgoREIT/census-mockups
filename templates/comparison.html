<!DOCTYPE html>{% load humanize %}
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="/{{ STATIC_URL }}css/normalize.min.css">
        <link rel="stylesheet" href="/{{ STATIC_URL }}css/revised.css">

        <script src="/{{ STATIC_URL }}js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body class="">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div class="header-container">
            <div id="header-bar">
                <div class="wrapper clearfix">
                    <img src="/{{ STATIC_URL }}img/_header-logo.png" alt="CensusReporter" class="clearfix">
                </div>
            </div>
            <header class="wrapper clearfix">
                <h1 class="title">Counties in Illinois</h1>
            </header>
        </div>

        <div class="content-container wrapper clearfix">
            
            <article class="clearfix">
                {% for header in category_headers %}{% with forloop.counter0 as index %}
                <section class="line-plot-container" id="line-plot-{{ index }}">
                    <h2>{{ header }}</h2>
                    <ul class="line-plot">
                    {% for geo in geo_values %}{% with forloop.counter0 as point_index %}
                        {% for value in geo.values %}{% if forloop.counter0 == index %}
                            <li style="left: {{ value.max_ratio|floatformat }}%">
                                <a class="line-plot-{{ point_index }}" data-index="geography-{{ point_index }}"><span><b>{{ geo.name }}</b><br>{{ value.value|intcomma }}</span></a>
                            </li>
                        {% endif %}{% endfor %}
                    {% endwith %}{% endfor %}
                    </ul>
                </section>
                {% endwith %}{% endfor %}
            </article>

            <article class="clearfix">
                <header>
                    <div class="table-tools">
                        <div class="table-tool-group">
                            Show
                            <ul class="toggle-controls">
                                <li><a id="show-percentage">Percentages</a></li>
                                <li><a id="show-raw-number">Raw numbers</a></li>
                            </ul>
                        </div>
                        {% comment %}
                        <div class="table-tool-group">
                            Download
                            <ul>
                                <li><a href="">CSV</a></li>
                                <li><a href="">JSON</a></li>
                            </ul>
                        </div>
                        {% endcomment %}
                    </div>
                    <h1>Age comparison</h1>
                </header>
                <section>
                    <table>
                        <thead>
                            <tr>
                                <th class="name">Name</th>
                                <th class="value">Total</th>
                                {% for header in category_headers %}
                                <th class="value">{{ header }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for geo in geo_values %}
                            <tr class="{% cycle 'odd' 'even' %}">
                                <td class="name">{{ geo.name }}</td>
                                <td class="value">{{ geo.total|intcomma }}</td>
                                {% for value in geo.values %}
                                <td class="value toggle-target">
                                    <span class="percentage">{{ value.percentage|floatformat }}%</span>
                                    <span class="raw-number">{{ value.value|intcomma }}</span>
                                </td>
                                {% endfor %}
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </section>
            </article>

        </div>

        <div class="footer-container clearfix">
            <footer class="wrapper">
                <div class="section-one-third">
                    <h1>About CensusReporter</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In accumsan egestas leo eu adipiscing. Aenean feugiat lobortis viverra. Cras vestibulum nunc a eros lacinia ut venenatis mauris lobortis.</p>
                </div>
                <div class="section-two-thirds">
                    <div class="section-one-third">
                        <h2>Some</h2>
                        <ul>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                        </ul>
                    </div>
                    <div class="section-one-third">
                        <h2>Census</h2>
                        <ul>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                        </ul>
                    </div>
                    <div class="section-one-third">
                        <h2>Things</h2>
                        <ul>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                            <li>Lorem ipsum dolor</li>
                        </ul>
                    </div>
                </div>
            </footer>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/{{ STATIC_URL }}js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
        <script src="/{{ STATIC_URL }}js/vendor/waypoints.js"></script>
        <script src="/{{ STATIC_URL }}js/vendor/jquery.scrollTo.min.js"></script>
        <script src="/{{ STATIC_URL }}js/vendor/jquery.localScroll.min.js"></script>
        <script src="/{{ STATIC_URL }}js/main.js"></script>
        <script>
        jQuery(document).ready(function(){
            $('.raw-number').css('display', 'none');
            $('#show-raw-number').css('text-decoration', 'none');
            var toggleControls = $('.toggle-controls a');
            toggleControls.on('click', function() {
                var clicked = $(this);
                toggleControls.css('text-decoration', 'none');
                clicked.css('text-decoration', 'underline');
                var targetClass = clicked.attr('id').replace('show-','');
                $('.toggle-target span').css('display', 'none');
                $('.'+targetClass).css('display', 'block');
            })
            
            var linePlots = $('.line-plot');
            var linePlotPoints = $('.line-plot a')
            linePlots.on('mouseover', 'a', function(e) {
                var chosenIndex = $(this).data('index');
                var filteredPoints = linePlotPoints.filter('[data-index='+chosenIndex+']');
                filteredPoints.addClass('hovered');
                filteredPoints.children('span').css('display', 'block');
            })
            linePlots.on('mouseout', 'a', function(e) {
                linePlotPoints.removeClass('hovered');
                linePlotPoints.children('span').removeAttr('style');
            })
            linePlots.on('click', 'a', function(e) {
                e.preventDefault();
                var chosenIndex = $(this).data('index');
                var filteredPoints = linePlotPoints.filter('[data-index='+chosenIndex+']');
                filteredPoints.toggleClass('selected');
            })
        })
        </script>
    </body>
</html>
